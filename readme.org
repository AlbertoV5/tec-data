#+title:    Data Analytics Bootcamp Notes.
#+author:   Alberto Valdez
#+email:    avq5ac1@gmail.com
#+SETUPFILE: https://albertov5.github.io/org-html-themes/org/theme-readtheorg.setup
#+PROPERTY: header-args :mkdirp yes :dir . :exports both
#+INCLUDE: ./publish.inc

| [[https://github.com/AlbertoV5/tec-data][Repository]] |

#+CALL: make_index[:results value raw]()
-------

* Site generation
#+begin_export html
<p>
#+end_export

The previous index is generated from the home directory using emacs' org-mode and python.

#+NAME: make_index
#+BEGIN_SRC python :results silent :exports code
"""Get all folders of {name} in cwd. Returns org formatted string."""
from pathlib import Path
from orgparse import load


dir_ident = "-"
file_name = "readme.org"
titles, headings = [], []

def get_title(org_file):
    return org_file.get_body().split("\n")[0].replace("#+title:", "").strip()

def to_title(path, title):
    return f"* [[./{path}/{file_name}][{title}]]"

def to_heading(i, path, heading):
    return  f"{i}. {heading}"

def combine(title, headings):
    return f"{title}\n{headings}"

paths = [p for p in sorted(Path.cwd().iterdir())
        if dir_ident in p.name and p.is_dir()]

for path in paths:
    org_file = load(path/file_name)
    title = to_title(path.name, get_title(org_file))
    titles.append(title)
    heading = "\n".join(to_heading(i+1, path.name, d.get_heading())
                         for i, d in enumerate(org_file.children))
    headings.append(heading)

return "\n".join(combine(p, c) for p, c in zip(titles, headings))
#+END_SRC

The HTML is rendered with org-mode's export dispatcher [fn:org-mode] and a custom css setup inspired by Read the Docs and the Furo theme for sphinx.

I am using an org parser instead of an HTML one because I will also be exporting to markdown and text.

I am also using alpha2phi's guide [fn:writing-docs] as a referece, and spudlyo's video too [fn:spud-video].

#+begin_export html
</p>
#+end_export

#+begin_export html
<div style="width: 80px; padding-bottom: 20px">
<img src = "./resources/tec-logo.svg" alt="tec-logo"/>
</div>
#+end_export


* Footnotes
[fn:org-mode]https://orgmode.org/manual/The-Export-Dispatcher.html
[fn:writing-docs]https://alpha2phi.medium.com/writing-technical-documentation-with-emacs-276f13284e54
[fn:spud-video] https://youtu.be/0g9BcZvQbXU
[fn:py-og-ref]https://orgmode.org/worg/org-contrib/babel/languages/ob-doc-python.html
[fn:org-format]https://orgmode.org/manual/Results-of-Evaluation.html
[fn:org-eval]https://orgmode.org/manual/Evaluating-Code-Blocks.html
[fn:org-pub-links]https://orgmode.org/manual/Publishing-links.html
